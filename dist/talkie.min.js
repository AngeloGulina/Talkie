/*! talkie - v0.7.3 */!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Talkie=t()}}(function(){var t;return function n(t,e,r){function i(o,s){if(!e[o]){if(!t[o]){var a="function"==typeof require&&require;if(!s&&a)return a(o,!0);if(u)return u(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=e[o]={exports:{}};t[o][0].call(c.exports,function(n){var e=t[o][1][n];return i(e?e:n)},c,c.exports,n,t,e,r)}return e[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(n,e){(function(){var n,r,i,u,o,s,a,l,c,f,h,p,d,g,m,y,v,b,w,k,x,_,E,S,A,M,B,O,I,j,T,P,q,L,C,F,W,V,H,$,D,z,R,N,U,Q,X,Z,K,G,J,Y,tn,nn,en,rn,un,on,sn,an,ln,cn,fn,hn,pn,dn,gn,mn,yn,vn={}.hasOwnProperty,bn=[].slice,wn=function(t,n){function e(){this.constructor=t}for(var r in n)vn.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},kn=function(t,n){return function(){return t.apply(n,arguments)}};n={toString:function(){return"Bacon"}},n.version="0.7.42",p=("undefined"!=typeof global&&null!==global?global:this).Error,mn={indexOf:Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){var e,r,i,u;for(e=i=0,u=t.length;u>i;e=++i)if(r=t[e],n===r)return e;return-1},indexWhere:function(t,n){var e,r,i,u;for(e=i=0,u=t.length;u>i;e=++i)if(r=t[e],n(r))return e;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(n){return!t(n)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,n){var e,r,i,u;for(e=[],i=0,u=n.length;u>i;i++)r=n[i],t(r)&&e.push(r);return e},map:function(t,n){var e,r,i,u;for(u=[],r=0,i=n.length;i>r;r++)e=n[r],u.push(t(e));return u},each:function(t,n){var e,r;for(e in t)r=t[e],n(e,r);return void 0},toArray:function(t){return R(t)?t:[t]},contains:function(t,n){return-1!==mn.indexOf(t,n)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,n){var e,r,i;for(null==n&&(n=mn.id),r=0,i=t.length;i>r;r++)if(e=t[r],!n(e))return!1;return!0},any:function(t,n){var e,r,i;for(null==n&&(n=mn.id),r=0,i=t.length;i>r;r++)if(e=t[r],n(e))return!0;return!1},without:function(t,n){return mn.filter(function(n){return n!==t},n)},remove:function(t,n){var e;return e=mn.indexOf(n,t),e>=0?n.splice(e,1):void 0},fold:function(t,n,e){var r,i,u;for(i=0,u=t.length;u>i;i++)r=t[i],n=e(n,r);return n},flatMap:function(t,n){return mn.fold(n,[],function(n,e){return n.concat(t(e))})},cached:function(t){var n;return n=m,function(){return n===m&&(n=t(),t=void 0),n}},toString:function(t){var n,e,r,i;try{return un++,null==t?"undefined":U(t)?"function":R(t)?un>5?"[..]":"["+mn.map(mn.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?un>5?"{..}":(e=function(){var e;e=[];for(r in t)vn.call(t,r)&&(i=function(){try{return t[r]}catch(e){return n=e}}(),e.push(mn.toString(r)+":"+mn.toString(i)));return e}(),"{"+e+"}"):t}finally{un--}}},un=0,n._=mn,n.scheduler={setTimeout:function(t,n){return setTimeout(t,n)},setInterval:function(t,n){return setInterval(t,n)},clearInterval:function(t){return clearInterval(t)},now:function(){return(new Date).getTime()}},n.fromBinder=function(t,e){return null==e&&(e=mn.id),new h(C(n,"fromBinder",t,e),function(r){var i,u,o,s;return s=!1,i=!1,u=function(){return s?void 0:"undefined"!=typeof o&&null!==o?(o(),s=!0):i=!0},o=t(function(){var t,i,o,s,a,l;for(t=1<=arguments.length?bn.call(arguments,0):[],s=e.apply(this,t),R(s)&&mn.last(s)instanceof f||(s=[s]),o=n.more,a=0,l=s.length;l>a;a++)if(i=s[a],o=r(i=ln(i)),o===n.noMore||i.isEnd())return u(),o;return o}),i&&u(),u})},n.$={},n.$.asEventStream=function(t,e,r){var i;return U(e)&&(i=[e,void 0],r=i[0],e=i[1]),dn(this.selector||this,"asEventStream",t,n.fromBinder(function(n){return function(r){return n.on(t,e,r),function(){return n.off(t,e,r)}}}(this),r))},null!=(yn="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(yn.fn.asEventStream=n.$.asEventStream),n.fromEventTarget=function(t,e,r){var i,u,o,s,a,l,c,f;return i=null!=(o=null!=(s=null!=(a=t.addEventListener)?a:t.addListener)?s:t.bind)?o:t.on,u=null!=(l=null!=(c=null!=(f=t.removeEventListener)?f:t.removeListener)?c:t.unbind)?l:t.off,dn(n,"fromEventTarget",t,e,n.fromBinder(function(n){return i.call(t,e,n),function(){return u.call(t,e,n)}},r))},n.fromPromise=function(t,e){return dn(n,"fromPromise",t,n.fromBinder(function(n){return t.then(n,function(t){return n(new c(t))}),function(){return e&&"function"==typeof t.abort?t.abort():void 0}},function(t){return[t,F()]}))},n.noMore=["<no-more>"],n.more=["<more>"],n.later=function(t,e){return dn(n,"later",t,e,n.fromPoll(t,function(){return[e,F()]}))},n.sequentially=function(t,e){var r;return r=0,dn(n,"sequentially",t,e,n.fromPoll(t,function(){var t;return t=e[r++],r<e.length?t:r===e.length?[t,F()]:F()}))},n.repeatedly=function(t,e){var r;return r=0,dn(n,"repeatedly",t,e,n.fromPoll(t,function(){return e[r++%e.length]}))},n.spy=function(t){return sn.push(t)},sn=[],on=function(t){var n,e,r;if(sn.length&&!on.running)try{for(on.running=!0,e=0,r=sn.length;r>e;e++)(n=sn[e])(t)}finally{delete on.running}return void 0},gn=function(t){return function(){var n,e,r,i;return r=arguments[0],n=2<=arguments.length?bn.call(arguments,1):[],"object"==typeof r&&n.length&&(e=r,i=n[0],r=function(){return e[i].apply(e,arguments)},n=n.slice(1)),t.apply(null,[r].concat(bn.call(n)))}},Z=function(t,e){return gn(function(){var r,i,u;return i=arguments[0],r=2<=arguments.length?bn.call(arguments,1):[],u=rn(e,[function(t,n){return i.apply(null,bn.call(t).concat([n]))}]),dn.apply(null,[n,t,i].concat(bn.call(r),[n.combineAsArray(r).flatMap(u)]))})},n.fromCallback=Z("fromCallback",function(){var t,e;return e=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],n.fromBinder(function(n){return K(e,t)(n),en},function(t){return[t,F()]})}),n.fromNodeCallback=Z("fromNodeCallback",function(){var t,e;return e=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],n.fromBinder(function(n){return K(e,t)(n),en},function(t,n){return t?[new c(t),F()]:[n,F()]})}),n.fromPoll=function(t,e){return dn(n,"fromPoll",t,e,n.fromBinder(function(e){var r;return r=n.scheduler.setInterval(e,t),function(){return n.scheduler.clearInterval(r)}},e))},n.interval=function(t,e){return null==e&&(e={}),dn(n,"interval",t,e,n.fromPoll(t,function(){return nn(e)}))},n.constant=function(t){return new v(C(n,"constant",t),function(n){return n(z(t)),n(F()),en})},n.never=function(){return new h(C(n,"never"),function(t){return t(F()),en})},n.once=function(t){return new h(C(n,"once",t),function(n){return n(ln(t)),n(F()),en})},n.fromArray=function(t){var e;return S(t),t.length?(e=0,new h(C(n,"fromArray",t),function(r){var i,u,o;return o=!1,u=n.more,i=function(){var s;return u===n.noMore||o||(s=t[e++],u=r(ln(s)),u===n.noMore)?void 0:e===t.length?r(F()):x.afterTransaction(i)},i(),function(){return o=!0}})):dn(n,"fromArray",t,n.never())},n.mergeAll=function(){var t;return t=1<=arguments.length?bn.call(arguments,0):[],R(t[0])&&(t=t[0]),t.length?new h(C.apply(null,[n,"mergeAll"].concat(bn.call(t))),function(e){var r,i,u;return r=0,u=function(i){return function(u){return i.dispatcher.subscribe(function(i){var o;return i.isEnd()?(r++,r===t.length?e(F()):n.more):(o=e(i),o===n.noMore&&u(),o)})}},i=mn.map(u,t),T.apply(null,i)}):n.never()},n.zipAsArray=function(){var t;return t=1<=arguments.length?bn.call(arguments,0):[],R(t[0])&&(t=t[0]),dn.apply(null,[n,"zipAsArray"].concat(bn.call(t),[n.zipWith(t,function(){var t;return t=1<=arguments.length?bn.call(arguments,0):[]})]))},n.zipWith=function(){var t,e,r;return t=arguments[0],e=2<=arguments.length?bn.call(arguments,1):[],U(t)||(r=[t,e[0]],e=r[0],t=r[1]),e=mn.map(function(t){return t.toEventStream()},e),dn.apply(null,[n,"zipWith",t].concat(bn.call(e),[n.when(e,t)]))},n.groupSimultaneous=function(){var t,e,i;return i=1<=arguments.length?bn.call(arguments,0):[],1===i.length&&R(i[0])&&(i=i[0]),e=function(){var n,e,u;for(u=[],n=0,e=i.length;e>n;n++)t=i[n],u.push(new r(t));return u}(),dn.apply(null,[n,"groupSimultaneous"].concat(bn.call(i),[n.when(e,function(){var t;return t=1<=arguments.length?bn.call(arguments,0):[]})]))},n.combineAsArray=function(){var t,e,r,i,u,o,s;for(u=1<=arguments.length?bn.call(arguments,0):[],1===u.length&&R(u[0])&&(u=u[0]),t=o=0,s=u.length;s>o;t=++o)i=u[t],Q(i)||(u[t]=n.constant(i));return u.length?(r=function(){var t,n,r;for(r=[],t=0,n=u.length;n>t;t++)e=u[t],r.push(new k(e,!0));return r}(),dn.apply(null,[n,"combineAsArray"].concat(bn.call(u),[n.when(r,function(){var t;return t=1<=arguments.length?bn.call(arguments,0):[]}).toProperty()]))):n.constant([])},n.onValues=function(){var t,e,r;return e=2<=arguments.length?bn.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],n.combineAsArray(e).onValues(t)},n.combineWith=function(){var t,e;return t=arguments[0],e=2<=arguments.length?bn.call(arguments,1):[],dn.apply(null,[n,"combineWith",t].concat(bn.call(e),[n.combineAsArray(e).map(function(n){return t.apply(null,n)})]))},n.combineTemplate=function(t){var e,r,i,u,o,s,a,l,c,f;return a=[],f=[],s=function(t){return t[t.length-1]},c=function(t,n,e){return s(t)[n]=e},e=function(t,n){return function(e,r){return c(e,t,r[n])}},o=function(t,n){return function(e){return c(e,t,n)}},l=function(t){return R(t)?[]:{}},i=function(t,n){var r,i;return Q(n)?(f.push(n),a.push(e(t,f.length-1))):n!==Object(n)||"function"==typeof n||n instanceof RegExp||n instanceof Date?a.push(o(t,n)):(i=function(t){return function(e){var r;return r=l(n),c(e,t,r),e.push(r)}},r=function(t){return t.pop()},a.push(i(t)),u(n),a.push(r))},u=function(t){return mn.each(t,i)},u(t),r=function(n){var e,r,i,u,o;for(i=l(t),e=[i],u=0,o=a.length;o>u;u++)(r=a[u])(e,n);return i},dn(n,"combineTemplate",t,n.combineAsArray(f).map(r))},n.retry=function(t){var e,r,i,u,o,s;if(!U(t.source))throw new p("'source' option has to be a function");return s=t.source,u=t.retries||0,i=t.maxRetries||u,e=t.delay||function(){return 0},r=t.isRetryable||function(){return!0},o=function(t){var o,a;return a={source:s,retries:u-1,maxRetries:i,delay:e,isRetryable:r},o=function(){return n.retry(a)},n.later(e(t)).filter(!1).concat(n.once().flatMap(o))},dn(n,"retry",t,s().flatMapError(function(t){return r(t)&&u>0?o({error:t,retriesDone:i-u}):n.once(new c(t))}))},W=0,f=function(){function t(){this.id=++W}return t.prototype.isEvent=function(){return!0},t.prototype.isEnd=function(){return!1},t.prototype.isInitial=function(){return!1},t.prototype.isNext=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.hasValue=function(){return!1},t.prototype.filter=function(){return!0},t.prototype.inspect=function(){return this.toString()},t.prototype.log=function(){return this.toString()},t}(),g=function(t){function n(t,e){n.__super__.constructor.call(this),!e&&U(t)||t instanceof n?(this.valueF=t,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=t)}return wn(n,t),n.prototype.isNext=function(){return!0},n.prototype.hasValue=function(){return!0},n.prototype.value=function(){return this.valueF instanceof n?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},n.prototype.fmap=function(t){var n,e;return this.valueInternal?(e=this.valueInternal,this.apply(function(){return t(e)})):(n=this,this.apply(function(){return t(n.value())}))},n.prototype.apply=function(t){return new n(t)},n.prototype.filter=function(t){return t(this.value())},n.prototype.toString=function(){return mn.toString(this.value())},n.prototype.log=function(){return this.value()},n}(f),d=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return wn(n,t),n.prototype.isInitial=function(){return!0},n.prototype.isNext=function(){return!1},n.prototype.apply=function(t){return new n(t)},n.prototype.toNext=function(){return new g(this)},n}(g),l=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return wn(n,t),n.prototype.isEnd=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<end>"},n}(f),c=function(t){function n(t){this.error=t}return wn(n,t),n.prototype.isError=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<error> "+mn.toString(this.error)},n}(f),D=0,y=function(){function t(t){this.id=++D,dn(t,this),this.initialDesc=this.desc}return t.prototype.subscribe=function(t){return x.wrappedSubscribe(this,t)},t.prototype.subscribeInternal=function(t){return this.dispatcher.subscribe(t)},t.prototype.onValue=function(){var t;return t=G(arguments),this.subscribe(function(n){return n.hasValue()?t(n.value()):void 0})},t.prototype.onValues=function(t){return this.onValue(function(n){return t.apply(null,n)})},t.prototype.onError=function(){var t;return t=G(arguments),this.subscribe(function(n){return n.isError()?t(n.error):void 0})},t.prototype.onEnd=function(){var t;return t=G(arguments),this.subscribe(function(n){return n.isEnd()?t():void 0})},t.prototype.errors=function(){return dn(this,"errors",this.filter(function(){return!1}))},t.prototype.filter=function(){var t,e;return e=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],L(this,e,t,function(t){return dn(this,"filter",t,this.withHandler(function(e){return e.filter(t)?this.push(e):n.more}))})},t.prototype.takeWhile=function(){var t,e;return e=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],L(this,e,t,function(t){return dn(this,"takeWhile",t,this.withHandler(function(e){return e.filter(t)?this.push(e):(this.push(F()),n.noMore)}))})},t.prototype.endOnError=function(){var t,n;return n=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],null==n&&(n=!0),L(this,n,t,function(t){return dn(this,"endOnError",this.withHandler(function(n){return n.isError()&&t(n.error)?(this.push(n),this.push(F())):this.push(n)}))})},t.prototype.take=function(t){return 0>=t?n.never():dn(this,"take",t,this.withHandler(function(e){return e.hasValue()?(t--,t>0?this.push(e):(0===t&&this.push(e),this.push(F()),n.noMore)):this.push(e)}))},t.prototype.map=function(){var t,n;return n=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],n instanceof v?n.sampledBy(this,$):L(this,n,t,function(t){return dn(this,"map",t,this.withHandler(function(n){return this.push(n.fmap(t))}))})},t.prototype.mapError=function(){var t;return t=G(arguments),dn(this,"mapError",t,this.withHandler(function(n){return this.push(n.isError()?nn(t(n.error)):n)}))},t.prototype.mapEnd=function(){var t;return t=G(arguments),dn(this,"mapEnd",t,this.withHandler(function(e){return e.isEnd()?(this.push(nn(t(e))),this.push(F()),n.noMore):this.push(e)}))},t.prototype.doAction=function(){var t;return t=G(arguments),dn(this,"doAction",t,this.withHandler(function(n){return n.hasValue()&&t(n.value()),this.push(n)}))},t.prototype.skip=function(t){return dn(this,"skip",t,this.withHandler(function(e){return e.hasValue()&&t>0?(t--,n.more):this.push(e)}))},t.prototype.skipDuplicates=function(t){return null==t&&(t=function(t,n){return t===n}),dn(this,"skipDuplicates",this.withStateMachine(m,function(n,e){return e.hasValue()?e.isInitial()||n===m||!t(n.get(),e.value())?[new w(e.value()),[e]]:[n,[]]:[n,[e]]}))},t.prototype.skipErrors=function(){return dn(this,"skipErrors",this.withHandler(function(t){return t.isError()?n.more:this.push(t)}))},t.prototype.withStateMachine=function(t,e){var r;return r=t,dn(this,"withStateMachine",t,e,this.withHandler(function(t){var i,u,o,s,a,l,c;for(i=e(r,t),u=i[0],s=i[1],r=u,a=n.more,l=0,c=s.length;c>l;l++)if(o=s[l],a=this.push(o),a===n.noMore)return a;return a}))},t.prototype.scan=function(t,e){var r,i,u;return e=an(e),r=hn(t),u=function(t){return function(u){var o,s,a,l;return o=!1,l=en,s=n.more,a=function(){return o?void 0:r.forEach(function(t){return o=!0,s=u(new d(function(){return t})),s===n.noMore?(l(),l=en):void 0})},l=t.dispatcher.subscribe(function(t){var i,l;return t.hasValue()?o&&t.isInitial()?n.more:(t.isInitial()||a(),o=!0,l=r.getOrElse(void 0),i=e(l,t.value()),r=new w(i),u(t.apply(function(){return i}))):(t.isEnd()&&(s=a()),s!==n.noMore?u(t):void 0)}),x.whenDoneWith(i,a),l}}(this),i=new v(C(this,"scan",t,e),u)},t.prototype.fold=function(t,n){return dn(this,"fold",t,n,this.scan(t,n).sampledBy(this.filter(!1).mapEnd().toProperty()))},t.prototype.zip=function(t,e){return null==e&&(e=Array),dn(this,"zip",t,n.zipWith([this,t],e))},t.prototype.diff=function(t,n){return n=an(n),dn(this,"diff",t,n,this.scan([t],function(t,e){return[e,n(t[0],e)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},t.prototype.flatMap=function(){return H(this,tn(arguments))},t.prototype.flatMapFirst=function(){return H(this,tn(arguments),!0)},t.prototype.flatMapWithConcurrencyLimit=function(){var t,n;return n=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],dn.apply(null,[this,"flatMapWithConcurrencyLimit",n].concat(bn.call(t),[H(this,tn(t),!1,n)]))},t.prototype.flatMapLatest=function(){var t,n;return t=tn(arguments),n=this.toEventStream(),dn(this,"flatMapLatest",t,n.flatMap(function(e){return Y(t(e)).takeUntil(n)}))},t.prototype.flatMapError=function(t){return dn(this,"flatMapError",t,this.mapError(function(t){return new c(t)}).flatMap(function(e){return e instanceof c?t(e.error):n.once(e)}))},t.prototype.flatMapConcat=function(){return dn.apply(null,[this,"flatMapConcat"].concat(bn.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(bn.call(arguments)))]))},t.prototype.bufferingThrottle=function(t){return dn(this,"bufferingThrottle",t,this.flatMapConcat(function(e){return n.once(e).concat(n.later(t).filter(!1))}))},t.prototype.not=function(){return dn(this,"not",this.map(function(t){return!t}))},t.prototype.log=function(){var t;return t=1<=arguments.length?bn.call(arguments,0):[],this.subscribe(function(n){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,bn.call(t).concat([n.log()])):void 0}),this},t.prototype.slidingWindow=function(t,n){return null==n&&(n=0),dn(this,"slidingWindow",t,n,this.scan([],function(n,e){return n.concat([e]).slice(-t)}).filter(function(t){return t.length>=n}))},t.prototype.combine=function(t,e){var r;return r=an(e),dn(this,"combine",t,e,n.combineAsArray(this,t).map(function(t){return r(t[0],t[1])}))},t.prototype.decode=function(t){return dn(this,"decode",t,this.combine(n.combineTemplate(t),function(t,n){return n[t]}))},t.prototype.awaiting=function(t){return dn(this,"awaiting",t,n.groupSimultaneous(this,t).map(function(t){var n,e;return n=t[0],e=t[1],0===e.length}).toProperty(!1).skipDuplicates())},t.prototype.name=function(t){return this._name=t,this},t.prototype.withDescription=function(){return C.apply(null,arguments).apply(this)},t.prototype.toString=function(){return this._name?this._name:this.desc.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t}(),y.prototype.reduce=y.prototype.fold,y.prototype.assign=y.prototype.onValue,y.prototype.inspect=y.prototype.toString,H=function(t,e,r,i){var o,s,a;return a=[t],o=[],s=new h(C(t,"flatMap"+(r?"First":""),e),function(s){var a,l,c,f,h;return c=new u,f=[],h=function(t){var r;return r=Y(e(t.value())),o.push(r),c.add(function(t,e){return r.dispatcher.subscribe(function(i){var u;return i.isEnd()?(mn.remove(r,o),l(),a(e),n.noMore):(i instanceof d&&(i=i.toNext()),u=s(i),u===n.noMore&&t(),u)})})},l=function(){var t;return t=f.shift(),t?h(t):void 0},a=function(t){return t(),c.empty()?s(F()):void 0},c.add(function(e,u){return t.dispatcher.subscribe(function(t){return t.isEnd()?a(u):t.isError()?s(t):r&&c.count()>1?n.more:c.unsubscribed?n.noMore:i&&c.count()>i?f.push(t):h(t)})}),c.unsubscribe}),s.internalDeps=function(){return o.length?a.concat(o):a},s},h=function(t){function e(t,n,r){U(t)&&(r=n,n=t,t=[]),e.__super__.constructor.call(this,t),M(n),this.dispatcher=new a(n,r),on(this)}return wn(e,t),e.prototype.delay=function(t){return dn(this,"delay",t,this.flatMap(function(e){return n.later(t,e)}))},e.prototype.debounce=function(t){return dn(this,"debounce",t,this.flatMapLatest(function(e){return n.later(t,e)}))},e.prototype.debounceImmediate=function(t){return dn(this,"debounceImmediate",t,this.flatMapFirst(function(e){return n.once(e).concat(n.later(t).filter(!1))}))},e.prototype.throttle=function(t){return dn(this,"throttle",t,this.bufferWithTime(t).map(function(t){return t[t.length-1]}))},e.prototype.bufferWithTime=function(t){return dn(this,"bufferWithTime",t,this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},e.prototype.bufferWithCount=function(t){return dn(this,"bufferWithCount",t,this.bufferWithTimeOrCount(void 0,t))},e.prototype.bufferWithTimeOrCount=function(t,n){var e;return e=function(e){return e.values.length===n?e.flush():void 0!==t?e.schedule():void 0},dn(this,"bufferWithTimeOrCount",t,n,this.buffer(t,e,e))},e.prototype.buffer=function(t,e,r){var i,u,o;return null==e&&(e=en),null==r&&(r=en),i={scheduled:!1,end:void 0,values:[],flush:function(){var t;if(this.scheduled=!1,this.values.length>0){if(t=this.push(nn(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==n.noMore)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,t(function(t){return function(){return t.flush()}}(this)))}},o=n.more,U(t)||(u=t,t=function(t){return n.scheduler.setTimeout(t,u)}),dn(this,"buffer",this.withHandler(function(t){return i.push=function(t){return function(n){return t.push(n)}}(this),t.isError()?o=this.push(t):t.isEnd()?(i.end=t,i.scheduled||i.flush()):(i.values.push(t.value()),e(i)),o}))},e.prototype.merge=function(t){var e;return A(t),e=this,dn(e,"merge",t,n.mergeAll(this,t))},e.prototype.toProperty=function(t){var e,r;return r=0===arguments.length?m:hn(function(){return t}),e=this.dispatcher,new v(C(this,"toProperty",t),function(t){var i,u,o,s;return i=!1,s=en,u=n.more,o=function(){return i?void 0:r.forEach(function(e){return i=!0,u=t(new d(e)),u===n.noMore?(s(),s=en):void 0})},s=e.subscribe(function(e){return e.hasValue()?i&&e.isInitial()?n.more:(e.isInitial()||o(),i=!0,r=new w(e),t(e)):(e.isEnd()&&(u=o()),u!==n.noMore?t(e):void 0)}),o(),s})},e.prototype.toEventStream=function(){return this},e.prototype.sampledBy=function(t,n){return dn(this,"sampledBy",t,n,this.toProperty().sampledBy(t,n))},e.prototype.concat=function(t){var n;return n=this,new e(C(n,"concat",t),function(e){var r,i;return i=en,r=n.dispatcher.subscribe(function(n){return n.isEnd()?i=t.dispatcher.subscribe(e):e(n)}),function(){return r(),i()}})},e.prototype.takeUntil=function(t){var e;return e={},dn(this,"takeUntil",t,n.groupSimultaneous(this.mapEnd(e),t.skipErrors()).withHandler(function(r){var i,u,o,s,a,l;if(r.hasValue()){if(l=r.value(),i=l[0],t=l[1],t.length)return this.push(F());for(u=n.more,s=0,a=i.length;a>s;s++)o=i[s],u=this.push(o===e?F():nn(o));return u}return this.push(r)}))},e.prototype.skipUntil=function(t){var n;return n=t.take(1).map(!0).toProperty(!1),dn(this,"skipUntil",t,this.filter(n))},e.prototype.skipWhile=function(){var t,e,r;return e=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],r=!1,L(this,e,t,function(t){return dn(this,"skipWhile",t,this.withHandler(function(e){return!r&&e.hasValue()&&t(e.value())?n.more:(e.hasValue()&&(r=!0),this.push(e))}))})},e.prototype.holdWhen=function(t){var e,r,i;return i=t.startWith(!1),r=i.filter(function(t){return!t}),e=i.filter(mn.id),dn(this,"holdWhen",t,this.filter(!1).merge(i.flatMapConcat(function(t){return function(i){return i?t.scan([],function(t,n){return t.concat(n)}).sampledBy(r).take(1).flatMap(n.fromArray):t.takeUntil(e)}}(this))))},e.prototype.startWith=function(t){return dn(this,"startWith",t,n.once(t).concat(this))},e.prototype.withHandler=function(t){return new e(C(this,"withHandler",t),this.dispatcher.subscribe,t)},e}(y),v=function(t){function e(t,n,r){U(t)&&(r=n,n=t,t=[]),e.__super__.constructor.call(this,t),M(n),this.dispatcher=new b(this,n,r),on(this)}return wn(e,t),e.prototype.sampledBy=function(t,r){var i,u,o,s,a;return null!=r?r=an(r):(i=!0,r=function(t){return t.value()}),a=new k(this,!1,i),o=new k(t,!0,i),s=n.when([a,o],r),u=t instanceof e?s.toProperty():s,dn(this,"sampledBy",t,r,u)},e.prototype.sample=function(t){return dn(this,"sample",t,this.sampledBy(n.interval(t,{})))},e.prototype.changes=function(){return new h(C(this,"changes"),function(t){return function(n){return t.dispatcher.subscribe(function(t){return t.isInitial()?void 0:n(t)})}}(this))},e.prototype.withHandler=function(t){return new e(C(this,"withHandler",t),this.dispatcher.subscribe,t)},e.prototype.toProperty=function(){return B(arguments),this},e.prototype.toEventStream=function(){return new h(C(this,"toEventStream"),function(t){return function(n){return t.dispatcher.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),n(t)})}}(this))},e.prototype.and=function(t){return dn(this,"and",t,this.combine(t,function(t,n){return t&&n}))},e.prototype.or=function(t){return dn(this,"or",t,this.combine(t,function(t,n){return t||n}))},e.prototype.delay=function(t){return this.delayChanges("delay",t,function(n){return n.delay(t)})},e.prototype.debounce=function(t){return this.delayChanges("debounce",t,function(n){return n.debounce(t)})},e.prototype.throttle=function(t){return this.delayChanges("throttle",t,function(n){return n.throttle(t)})},e.prototype.delayChanges=function(){var t,n,e;return t=2<=arguments.length?bn.call(arguments,0,e=arguments.length-1):(e=0,[]),n=arguments[e++],dn.apply(null,[this].concat(bn.call(t),[_(this,n(this.changes()))]))},e.prototype.takeUntil=function(t){var n;return n=this.changes().takeUntil(t),dn(this,"takeUntil",t,_(this,n))},e.prototype.startWith=function(t){return dn(this,"startWith",t,this.scan(t,function(t,n){return n}))},e.prototype.bufferingThrottle=function(){var t;return(t=e.__super__.bufferingThrottle.apply(this,arguments)).bufferingThrottle.apply(t,arguments).toProperty()},e}(y),L=function(t,n,e,r){var i;return n instanceof v?(i=n.sampledBy(t,function(t,n){return[t,n]}),r.call(i,function(t){var n,e;return n=t[0],e=t[1],n}).map(function(t){var n,e;return n=t[0],e=t[1]})):(n=K(n,e),r.call(t,n))},_=function(t,e){var r;return r=new h(C(t,"justInitValue"),function(e){var i,u;return u=void 0,i=t.dispatcher.subscribe(function(t){return t.isEnd()||(u=t),n.noMore}),x.whenDoneWith(r,function(){return null!=u&&e(u),e(F())}),i}),r.concat(e).toProperty()},a=function(){function t(t,n){this._subscribe=t,this._handleEvent=n,this.subscribe=kn(this.subscribe,this),this.handleEvent=kn(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return t.prototype.hasSubscribers=function(){return this.subscriptions.length>0},t.prototype.removeSub=function(t){return this.subscriptions=mn.without(t,this.subscriptions)},t.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),x.inTransaction(t,this,this.pushIt,[t])},t.prototype.pushToSubscriptions=function(t){var e,r,i,u,o,s;try{for(u=this.subscriptions,o=0,s=u.length;s>o;o++)i=u[o],r=i.sink(t),(r===n.noMore||t.isEnd())&&this.removeSub(i);return!0}catch(a){throw e=a,this.pushing=!1,this.queue=[],e}},t.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),n.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?n.more:(this.unsubscribeFromSource(),n.noMore)}},t.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},t.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},t.prototype.subscribe=function(t){var n;return this.ended?(t(F()),en):(M(t),n={sink:t},this.subscriptions.push(n),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),M(this.unsubSrc)),function(t){return function(){return t.removeSub(n),t.hasSubscribers()?void 0:t.unsubscribeFromSource()}}(this))},t}(),b=function(t){function e(t,n,r){this.property=t,this.subscribe=kn(this.subscribe,this),e.__super__.constructor.call(this,n,r),this.current=m,this.currentValueRootId=void 0,this.propertyEnded=!1}return wn(e,t),e.prototype.push=function(t){return t.isEnd()&&(this.propertyEnded=!0),t.hasValue()&&(this.current=new w(t),this.currentValueRootId=x.currentEventId()),e.__super__.push.call(this,t)},e.prototype.maybeSubSource=function(t,e){return e===n.noMore?en:this.propertyEnded?(t(F()),en):a.prototype.subscribe.call(this,t)},e.prototype.subscribe=function(t){var e,r,i,u;return r=!1,i=n.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(e=x.currentEventId(),u=this.currentValueRootId,!this.propertyEnded&&u&&e&&e!==u?(x.whenDoneWith(this.property,function(n){return function(){return n.currentValueRootId===u?t(z(n.current.get().value())):void 0}}(this)),this.maybeSubSource(t,i)):(x.inTransaction(void 0,this,function(){return i=t(z(this.current.get().value()))},[]),this.maybeSubSource(t,i))):this.maybeSubSource(t,i)},e}(a),i=function(t){function e(){this.guardedSink=kn(this.guardedSink,this),this.subscribeAll=kn(this.subscribeAll,this),this.unsubAll=kn(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,e.__super__.constructor.call(this,C(n,"Bus"),this.subscribeAll)}return wn(e,t),e.prototype.unsubAll=function(){var t,n,e,r;for(r=this.subscriptions,n=0,e=r.length;e>n;n++)t=r[n],"function"==typeof t.unsub&&t.unsub();return void 0},e.prototype.subscribeAll=function(t){var n,e,r,i;for(this.sink=t,i=j(this.subscriptions),e=0,r=i.length;r>e;e++)n=i[e],this.subscribeInput(n);return this.unsubAll},e.prototype.guardedSink=function(t){return function(e){return function(r){return r.isEnd()?(e.unsubscribeInput(t),n.noMore):e.sink(r)}}(this)},e.prototype.subscribeInput=function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input))},e.prototype.unsubscribeInput=function(t){var n,e,r,i,u;for(u=this.subscriptions,n=r=0,i=u.length;i>r;n=++r)if(e=u[n],e.input===t)return"function"==typeof e.unsub&&e.unsub(),void this.subscriptions.splice(n,1)},e.prototype.plug=function(t){var n;return O(t),this.ended?void 0:(n={input:t},this.subscriptions.push(n),null!=this.sink&&this.subscribeInput(n),function(n){return function(){return n.unsubscribeInput(t)}}(this))},e.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(F()):void 0},e.prototype.push=function(t){return"function"==typeof this.sink?this.sink(nn(t)):void 0},e.prototype.error=function(t){return"function"==typeof this.sink?this.sink(new c(t)):void 0},e}(h),k=function(){function t(t,n,e){this.obs=t,this.sync=n,this.lazy=null!=e?e:!1,this.queue=[]}return t.prototype.subscribe=function(t){return this.obs.dispatcher.subscribe(t)},t.prototype.toString=function(){return this.obs.toString()},t.prototype.markEnded=function(){return this.ended=!0},t.prototype.consume=function(){return this.lazy?{value:mn.always(this.queue[0])}:this.queue[0]},t.prototype.push=function(t){return this.queue=[t]},t.prototype.mayHave=function(){return!0},t.prototype.hasAtLeast=function(){return this.queue.length},t.prototype.flatten=!0,t}(),o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return wn(n,t),n.prototype.consume=function(){return this.queue.shift()},n.prototype.push=function(t){return this.queue.push(t)
},n.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t},n.prototype.hasAtLeast=function(t){return this.queue.length>=t},n.prototype.flatten=!1,n}(k),r=function(t){function n(t){n.__super__.constructor.call(this,t,!0)}return wn(n,t),n.prototype.consume=function(){var t;return t=this.queue,this.queue=[],{value:function(){return t}}},n.prototype.push=function(t){return this.queue.push(t.value())},n.prototype.hasAtLeast=function(){return!0},n}(k),k.isTrigger=function(t){return t instanceof k?t.sync:t instanceof h},k.fromObservable=function(t){return t instanceof k?t:t instanceof v?new k(t,!1):new o(t,!0)},C=function(){var t,n,e;return n=arguments[0],e=arguments[1],t=3<=arguments.length?bn.call(arguments,2):[],(n||e)instanceof s?n||e:new s(n,e,t)},V=function(t){return R(t)?mn.flatMap(V,t):Q(t)?[t]:t instanceof k?[t.obs]:[]},s=function(){function t(t,n,e){this.context=t,this.method=n,this.args=e,this.cached=void 0}return t.prototype.deps=function(){return this.cached||(this.cached=V([this.context].concat(this.args)))},t.prototype.apply=function(t){return t.desc=this,t},t.prototype.toString=function(){return mn.toString(this.context)+"."+mn.toString(this.method)+"("+mn.map(mn.toString,this.args)+")"},t}(),dn=function(){var t,n,e;return t=2<=arguments.length?bn.call(arguments,0,e=arguments.length-1):(e=0,[]),n=arguments[e++],C.apply(null,t).apply(n)},n.when=function(){var t,e,r,i,u,o,s,a,l,c,f,p,d,g,m,y,v,b,w,_;if(0===arguments.length)return n.never();for(u=arguments.length,m="when: expecting arguments in the form (Observable+,function)+",E(m,u%2===0),d=[],l=[],e=0,c=[];u>e;){for(c[e]=arguments[e],c[e+1]=arguments[e+1],a=mn.toArray(arguments[e]),t=P(arguments[e+1]),s={f:t,ixs:[]},g=!1,y=0,b=a.length;b>y;y++){for(p=a[y],r=mn.indexOf(d,p),g||(g=k.isTrigger(p)),0>r&&(d.push(p),r=d.length-1),_=s.ixs,v=0,w=_.length;w>v;v++)i=_[v],i.index===r&&i.count++;s.ixs.push({index:r,count:1})}E("At least one EventStream required",g||!a.length),a.length>0&&l.push(s),e+=2}return d.length?(d=mn.map(k.fromObservable,d),o=mn.any(d,function(t){return t.flatten})&&q(mn.map(function(t){return t.obs},d)),f=new h(C.apply(null,[n,"when"].concat(bn.call(c))),function(t){var r,i,u,s,a,c,h;return h=[],u=!1,s=function(t){var n,r,i;for(i=t.ixs,n=0,r=i.length;r>n;n++)if(e=i[n],!d[e.index].hasAtLeast(e.count))return!1;return!0},i=function(t){return!t.sync||t.ended},r=function(t){var n,r,i;for(i=t.ixs,n=0,r=i.length;r>n;n++)if(e=i[n],!d[e.index].mayHave(e.count))return!0},a=function(t){return!t.source.flatten},c=function(c){return function(p){var g,m,y;return m=function(){return x.whenDoneWith(f,g)},y=function(){var r,i,u,o,c,f;if(!(h.length>0))return n.more;for(u=n.more,o=h.pop(),c=0,f=l.length;f>c;c++)if(i=l[c],s(i))return r=function(){var t,n,r,u;for(r=i.ixs,u=[],t=0,n=r.length;n>t;t++)e=r[t],u.push(d[e.index].consume());return u}(),u=t(o.e.apply(function(){var t,n;return n=function(){var n,e,i;for(i=[],n=0,e=r.length;e>n;n++)t=r[n],i.push(t.value());return i}(),i.f.apply(i,n)})),h.length&&(h=mn.filter(a,h)),u===n.noMore?u:y()},g=function(){var e;return e=y(),u&&(u=!1,(mn.all(d,i)||mn.all(l,r))&&(e=n.noMore,t(F()))),e===n.noMore&&p(),e},c.subscribe(function(e){var r;return e.isEnd()?(u=!0,c.markEnded(),m()):e.isError()?r=t(e):(c.push(e),c.sync&&(h.push({source:c,e:e}),o||x.hasWaiters()?m():g())),r===n.noMore&&p(),r||n.more})}},T.apply(null,function(){var t,n,e;for(e=[],t=0,n=d.length;n>t;t++)p=d[t],e.push(c(p));return e}())})):n.never()},q=function(t,n){var e;return null==n&&(n=[]),e=function(t){var r;return mn.contains(n,t)?!0:(r=t.internalDeps(),r.length?(n.push(t),mn.any(r,e)):(n.push(t),!1))},mn.any(t,e)},n.update=function(){var t,e,r,i;for(e=arguments[0],i=2<=arguments.length?bn.call(arguments,1):[],r=function(t){return function(){var n;return n=1<=arguments.length?bn.call(arguments,0):[],function(e){return t.apply(null,[e].concat(n))}}},t=i.length-1;t>0;)i[t]instanceof Function||(i[t]=function(t){return function(){return t}}(i[t])),i[t]=r(i[t]),t-=2;return dn.apply(null,[n,"update",e].concat(bn.call(i),[n.when.apply(n,i).scan(e,function(t,n){return n(t)})]))},T=function(){var t;return t=1<=arguments.length?bn.call(arguments,0):[],new u(t).unsubscribe},u=function(){function t(t){var n,e,r;for(null==t&&(t=[]),this.unsubscribe=kn(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],e=0,r=t.length;r>e;e++)n=t[e],this.add(n)}return t.prototype.add=function(t){var n,e,r;if(!this.unsubscribed)return n=!1,e=en,this.starting.push(t),r=function(r){return function(){return r.unsubscribed?void 0:(n=!0,r.remove(e),mn.remove(t,r.starting))}}(this),e=t(this.unsubscribe,r),this.unsubscribed||n||this.subscriptions.push(e),mn.remove(t,this.starting),e},t.prototype.remove=function(t){return this.unsubscribed?void 0:void 0!==mn.remove(t,this.subscriptions)?t():void 0},t.prototype.unsubscribe=function(){var t,n,e,r;if(!this.unsubscribed){for(this.unsubscribed=!0,r=this.subscriptions,n=0,e=r.length;e>n;n++)(t=r[n])();return this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=function(){return 0===this.count()},t}(),n.CompositeUnsubscribe=u,w=function(){function t(t){this.value=t}return t.prototype.getOrElse=function(){return this.value},t.prototype.get=function(){return this.value},t.prototype.filter=function(n){return n(this.value)?new t(this.value):m},t.prototype.map=function(n){return new t(n(this.value))},t.prototype.forEach=function(t){return t(this.value)},t.prototype.isDefined=!0,t.prototype.toArray=function(){return[this.value]},t.prototype.inspect=function(){return"Some("+this.value+")"},t.prototype.toString=function(){return this.inspect()},t}(),m={getOrElse:function(t){return t},filter:function(){return m},map:function(){return m},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},x=function(){var t,e,r,i,u,o,s,a,l,c,f,h,p,d;return c=void 0,f=[],h={},e=[],r=0,t=function(t){return c?e.push(t):t()},p=function(t,n){var e;return c?(e=h[t.id],null==e?(e=h[t.id]=[n],f.push(t)):e.push(n)):n()},u=function(){for(;f.length>0;)s(0);return void 0},s=function(t){var n,e,r,i,u,s;for(e=f[t],r=e.id,i=h[r],f.splice(t,1),delete h[r],o(e),u=0,s=i.length;s>u;u++)(n=i[u])();return void 0},o=function(t){var n,e,r,i,u;for(e=t.internalDeps(),i=0,u=e.length;u>i;i++)n=e[i],o(n),h[n.id]&&(r=mn.indexOf(f,n),s(r));return void 0},l=function(t,n,i,o){var s,a;if(c)return i.apply(n,o);c=t;try{a=i.apply(n,o),u()}finally{for(c=void 0;r<e.length;)s=e[r],r++,s();r=0,e=[]}return a},i=function(){return c?c.id:void 0},d=function(e,r){var i,u,o,s;return s=!1,u=!1,i=function(){return u=!0},o=function(){return s=!0,i()},i=e.dispatcher.subscribe(function(e){return t(function(){var t;return s||(t=r(e),t!==n.noMore)?void 0:o()})}),u&&i(),o},a=function(){return f.length>0},{whenDoneWith:p,hasWaiters:a,inTransaction:l,currentEventId:i,wrappedSubscribe:d,afterTransaction:t}}(),n.EventStream=h,n.Property=v,n.Observable=y,n.Bus=i,n.Initial=d,n.Next=g,n.End=l,n.Error=c,en=function(){},X=function(t,n){return n},$=function(t){return t},z=function(t){return new d(t,!0)},nn=function(t){return new g(t,!0)},F=function(){return new l},ln=function(t){return t instanceof f?t:nn(t)},j=function(t){return t.slice(0)},E=function(t,n){if(!n)throw new p(t)},A=function(t){if(!(t instanceof h))throw new p("not an EventStream : "+t)},O=function(t){if(!(t instanceof y))throw new p("not an Observable : "+t)},M=function(t){return E("not a function : "+t,U(t))},U=function(t){return"function"==typeof t},R=function(t){return t instanceof Array},Q=function(t){return t instanceof y},S=function(t){if(!R(t))throw new p("not an array : "+t)},B=function(t){return E("no arguments supported",0===t.length)},I=function(t){if("string"!=typeof t)throw new p("not a string : "+t)},rn=function(t,n){return function(){var e;return e=1<=arguments.length?bn.call(arguments,0):[],t.apply(null,n.concat(e))}},tn=function(t){return 1===t.length&&Q(t[0])?mn.always(t[0]):G(t)},G=function(t){return t=Array.prototype.slice.call(t),J.apply(null,t)},J=gn(function(){var t,n;return n=arguments[0],t=2<=arguments.length?bn.call(arguments,1):[],U(n)?t.length?rn(n,t):n:N(n)?cn(n,t):mn.always(n)}),K=function(t,n){return J.apply(null,[t].concat(bn.call(n)))},P=function(t){return U(t)?t:mn.always(t)},Y=function(t){return Q(t)?t:n.once(t)},N=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},n.isFieldKey=N,cn=function(t,n){var e,r;return r=t.slice(1).split("."),e=mn.map(pn(n),r),function(n){var r,i;for(r=0,i=e.length;i>r;r++)t=e[r],n=t(n);return n}},pn=function(t){return function(n){return function(e){var r;return null==e?void 0:(r=e[n],U(r)?r.apply(e,t):r)}}},fn=function(t){return t.slice(1)},an=function(t){var n;return U(t)?t:N(t)?(n=fn(t),function(t,e){return t[n](e)}):E("not a function or a field key: "+t,!1)},hn=function(t){return t instanceof w||t===m?t:new w(t)},"undefined"!=typeof t&&null!==t&&null!=t.amd?(t([],function(){return n}),this.Bacon=n):"undefined"!=typeof e&&null!==e&&null!=e.exports?(e.exports=n,n.Bacon=n):this.Bacon=n}).call(this)},{}],2:[function(t,n,e){e=n.exports=function(t){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;n&&(t=n)}if("number"==typeof t)return o[t];var e=String(t),u=r[e.toLowerCase()];if(u)return u;var u=i[e.toLowerCase()];return u?u:1===e.length?e.charCodeAt(0):void 0};var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,windows:91,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,"⇧":16,"⌥":18,"⌃":17,"⌘":91},i=e.aliases={shift:16,ctl:17,ctrl:17,control:17,alt:18,option:18,pause:19,"break":19,caps:20,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */
for(u=97;123>u;u++)r[String.fromCharCode(u)]=u-32;for(var u=48;58>u;u++)r[u-48]=u;for(u=1;13>u;u++)r["f"+u]=u+111;for(u=0;10>u;u++)r["numpad "+u]=u+96;var o=e.names=e.title={};for(u in r)o[r[u]]=u;for(var s in i)r[s]=i[s]},{}],3:[function(n,e,r){(function(n){(function(){function n(t){this.tokens=[],this.tokens.links={},this.options=t||h.defaults,this.rules=p.normal,this.options.gfm&&(this.rules=this.options.tables?p.tables:p.gfm)}function i(t,n){if(this.options=n||h.defaults,this.links=t,this.rules=d.normal,this.renderer=this.options.renderer||new u,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?d.breaks:d.gfm:this.options.pedantic&&(this.rules=d.pedantic)}function u(t){this.options=t||{}}function o(t){this.tokens=[],this.token=null,this.options=t||h.defaults,this.options.renderer=this.options.renderer||new u,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(t,n){return t.replace(n?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(t){return t.replace(/&([#\w]+);/g,function(t,n){return n=n.toLowerCase(),"colon"===n?":":"#"===n.charAt(0)?String.fromCharCode("x"===n.charAt(1)?parseInt(n.substring(2),16):+n.substring(1)):""})}function l(t,n){return t=t.source,n=n||"",function e(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(r,i),e):new RegExp(t,n)}}function c(){}function f(t){for(var n,e,r=1;r<arguments.length;r++){n=arguments[r];for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t}function h(t,e,r){if(r||"function"==typeof e){r||(r=e,e=null),e=f({},h.defaults,e||{});var i,u,a=e.highlight,l=0;try{i=n.lex(t,e)}catch(c){return r(c)}u=i.length;var p=function(t){if(t)return e.highlight=a,r(t);var n;try{n=o.parse(i,e)}catch(u){t=u}return e.highlight=a,t?r(t):r(null,n)};if(!a||a.length<3)return p();if(delete e.highlight,!u)return p();for(;l<i.length;l++)!function(t){return"code"!==t.type?--u||p():a(t.text,t.lang,function(n,e){return n?p(n):null==e||e===t.text?--u||p():(t.text=e,t.escaped=!0,void(--u||p()))})}(i[l])}else try{return e&&(e=f({},h.defaults,e)),o.parse(n.lex(t,e),e)}catch(c){if(c.message+="\nPlease report this to https://github.com/chjj/marked.",(e||h.defaults).silent)return"<p>An error occured:</p><pre>"+s(c.message+"",!0)+"</pre>";throw c}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:c,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:c,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:c,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=l(p.item,"gm")(/bull/g,p.bullet)(),p.list=l(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=l(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=l(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=l(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=f({},p),p.gfm=f({},p.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),p.gfm.paragraph=l(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=f({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),n.rules=p,n.lex=function(t,e){var r=new n(e);return r.lex(t)},n.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},n.prototype.token=function(t,n,e){for(var r,i,u,o,s,a,l,c,f,t=t.replace(/^ +$/gm,"");t;)if((u=this.rules.newline.exec(t))&&(t=t.substring(u[0].length),u[0].length>1&&this.tokens.push({type:"space"})),u=this.rules.code.exec(t))t=t.substring(u[0].length),u=u[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?u:u.replace(/\n+$/,"")});else if(u=this.rules.fences.exec(t))t=t.substring(u[0].length),this.tokens.push({type:"code",lang:u[2],text:u[3]});else if(u=this.rules.heading.exec(t))t=t.substring(u[0].length),this.tokens.push({type:"heading",depth:u[1].length,text:u[2]});else if(n&&(u=this.rules.nptable.exec(t))){for(t=t.substring(u[0].length),a={type:"table",header:u[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:u[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:u[3].replace(/\n$/,"").split("\n")},c=0;c<a.align.length;c++)a.align[c]=/^ *-+: *$/.test(a.align[c])?"right":/^ *:-+: *$/.test(a.align[c])?"center":/^ *:-+ *$/.test(a.align[c])?"left":null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].split(/ *\| */);this.tokens.push(a)}else if(u=this.rules.lheading.exec(t))t=t.substring(u[0].length),this.tokens.push({type:"heading",depth:"="===u[2]?1:2,text:u[1]});else if(u=this.rules.hr.exec(t))t=t.substring(u[0].length),this.tokens.push({type:"hr"});else if(u=this.rules.blockquote.exec(t))t=t.substring(u[0].length),this.tokens.push({type:"blockquote_start"}),u=u[0].replace(/^ *> ?/gm,""),this.token(u,n,!0),this.tokens.push({type:"blockquote_end"});else if(u=this.rules.list.exec(t)){for(t=t.substring(u[0].length),o=u[2],this.tokens.push({type:"list_start",ordered:o.length>1}),u=u[0].match(this.rules.item),r=!1,f=u.length,c=0;f>c;c++)a=u[c],l=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(l-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&c!==f-1&&(s=p.bullet.exec(u[c+1])[0],o===s||o.length>1&&s.length>1||(t=u.slice(c+1).join("\n")+t,c=f-1)),i=r||/\n\n(?!\s*$)/.test(a),c!==f-1&&(r="\n"===a.charAt(a.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1,e),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(u=this.rules.html.exec(t))t=t.substring(u[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===u[1]||"script"===u[1]||"style"===u[1],text:u[0]});else if(!e&&n&&(u=this.rules.def.exec(t)))t=t.substring(u[0].length),this.tokens.links[u[1].toLowerCase()]={href:u[2],title:u[3]};else if(n&&(u=this.rules.table.exec(t))){for(t=t.substring(u[0].length),a={type:"table",header:u[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:u[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:u[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<a.align.length;c++)a.align[c]=/^ *-+: *$/.test(a.align[c])?"right":/^ *:-+: *$/.test(a.align[c])?"center":/^ *:-+ *$/.test(a.align[c])?"left":null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(n&&(u=this.rules.paragraph.exec(t)))t=t.substring(u[0].length),this.tokens.push({type:"paragraph",text:"\n"===u[1].charAt(u[1].length-1)?u[1].slice(0,-1):u[1]});else if(u=this.rules.text.exec(t))t=t.substring(u[0].length),this.tokens.push({type:"text",text:u[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var d={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:c,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:c,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};d._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,d._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,d.link=l(d.link)("inside",d._inside)("href",d._href)(),d.reflink=l(d.reflink)("inside",d._inside)(),d.normal=f({},d),d.pedantic=f({},d.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),d.gfm=f({},d.normal,{escape:l(d.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(d.text)("]|","~]|")("|","|https?://|")()}),d.breaks=f({},d.gfm,{br:l(d.br)("{2,}","*")(),text:l(d.gfm.text)("{2,}","*")()}),i.rules=d,i.output=function(t,n,e){var r=new i(n,e);return r.output(t)},i.prototype.output=function(t){for(var n,e,r,i,u="";t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),u+=i[1];else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),"@"===i[2]?(e=this.mangle(":"===i[1].charAt(6)?i[1].substring(7):i[1]),r=this.mangle("mailto:")+e):(e=s(i[1]),r=e),u+=this.renderer.link(r,null,e);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),t=t.substring(i[0].length),u+=this.options.sanitize?s(i[0]):i[0];else if(i=this.rules.link.exec(t))t=t.substring(i[0].length),this.inLink=!0,u+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){u+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,u+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),u+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),u+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),u+=this.renderer.codespan(s(i[2],!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),u+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),u+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),u+=s(this.smartypants(i[0]));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(i[0].length),e=s(i[1]),r=e,u+=this.renderer.link(r,null,e);return u},i.prototype.outputLink=function(t,n){var e=s(n.href),r=n.title?s(n.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(e,r,this.output(t[1])):this.renderer.image(e,r,s(t[1]))},i.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},i.prototype.mangle=function(t){for(var n,e="",r=t.length,i=0;r>i;i++)n=t.charCodeAt(i),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e},u.prototype.code=function(t,n,e){if(this.options.highlight){var r=this.options.highlight(t,n);null!=r&&r!==t&&(e=!0,t=r)}return n?'<pre><code class="'+this.options.langPrefix+s(n,!0)+'">'+(e?t:s(t,!0))+"\n</code></pre>\n":"<pre><code>"+(e?t:s(t,!0))+"\n</code></pre>"},u.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},u.prototype.html=function(t){return t},u.prototype.heading=function(t,n,e){return"<h"+n+' id="'+this.options.headerPrefix+e.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+n+">\n"},u.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},u.prototype.list=function(t,n){var e=n?"ol":"ul";return"<"+e+">\n"+t+"</"+e+">\n"},u.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},u.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},u.prototype.table=function(t,n){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+n+"</tbody>\n</table>\n"},u.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},u.prototype.tablecell=function(t,n){var e=n.header?"th":"td",r=n.align?"<"+e+' style="text-align:'+n.align+'">':"<"+e+">";return r+t+"</"+e+">\n"},u.prototype.strong=function(t){return"<strong>"+t+"</strong>"},u.prototype.em=function(t){return"<em>"+t+"</em>"},u.prototype.codespan=function(t){return"<code>"+t+"</code>"},u.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},u.prototype.del=function(t){return"<del>"+t+"</del>"},u.prototype.link=function(t,n,e){if(this.options.sanitize){try{var r=decodeURIComponent(a(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var u='<a href="'+t+'"';return n&&(u+=' title="'+n+'"'),u+=">"+e+"</a>"},u.prototype.image=function(t,n,e){var r='<img src="'+t+'" alt="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=this.options.xhtml?"/>":">"},o.parse=function(t,n,e){var r=new o(n,e);return r.parse(t)},o.prototype.parse=function(t){this.inline=new i(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,n,e,r,i,u="",o="";for(e="",t=0;t<this.token.header.length;t++)r={header:!0,align:this.token.align[t]},e+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(u+=this.renderer.tablerow(e),t=0;t<this.token.cells.length;t++){for(n=this.token.cells[t],e="",i=0;i<n.length;i++)e+=this.renderer.tablecell(this.inline.output(n[i]),{header:!1,align:this.token.align[i]});o+=this.renderer.tablerow(e)}return this.renderer.table(u,o);case"blockquote_start":for(var o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":for(var o="",s=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,s);case"list_item_start":for(var o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(var o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},c.exec=c,h.options=h.setOptions=function(t){return f(h.defaults,t),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new u,xhtml:!1},h.Parser=o,h.parser=o.parse,h.Renderer=u,h.Lexer=n,h.lexer=n.lex,h.InlineLexer=i,h.inlineLexer=i.output,h.parse=h,"undefined"!=typeof e&&"object"==typeof r?e.exports=h:"function"==typeof t&&t.amd?t(function(){return h}):this.marked=h}).call(function(){return this||("undefined"!=typeof window?window:n)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,n){"use strict";function e(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}n.exports=Object.assign||function(t){for(var n,r,i=e(t),u=1;u<arguments.length;u++){n=arguments[u],r=Object.keys(Object(n));for(var o=0;o<r.length;o++)i[r[o]]=n[r[o]]}return i}},{}],5:[function(t,n,e){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=t("baconjs"),u=r(i),o=t("./util"),s=r(o),a="backface",l="backface-filter";e["default"]=function(t){var n=new u["default"].Bus,e=new u["default"].Bus;return n.map(".getAttribute",a).map(function(t){return t?"url("+t+")":""}).onValue(s["default"].styleAssignOf(t,"background-image")),e.map(".getAttribute",l).onValue(s["default"].styleAssignOf(t,s["default"].stylePrefixDetect("filter"))),u["default"].fromArray(s["default"].toArray(document.querySelectorAll("["+a+"]"))).map(".getAttribute",a).filter(function(t){return!!t}).onValue(s["default"].preloadImg),{bgImageBus:n,bgFilterBus:e}},n.exports=e["default"]},{"./util":14,baconjs:1}],6:[function(t,n,e){"use strict";function r(t){return function(n){return n.keyCode===t}}var i=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var u=t("baconjs"),o=i(u),s=t("keycode"),a=i(s),l=o["default"].fromEventTarget(document,"keyup"),c=o["default"].fromEventTarget(document,"keydown");e["default"]={key:function(t){var n="string"==typeof t?a["default"](t):t;return l.filter(r(n))},keydown:function(t){var n="string"==typeof t?a["default"](t):t;return c.filter(r(n))},click:function(t){return o["default"].fromEventTarget(t,"click")},mousemove:function(){var t=void 0===arguments[0]?document.body:arguments[0];return o["default"].fromEventTarget(t,"mousemove")},touchstart:function(t){return o["default"].fromEventTarget(t,"touchstart")},touchend:function(t){return o["default"].fromEventTarget(t,"touchend")},touchmove:function(t){return o["default"].fromEventTarget(t,"touchmove")},swipe:function(t){var n=void 0===arguments[1]?new o["default"].Bus:arguments[1],e=this.touchstart(t).doAction(".preventDefault"),r=this.touchmove(t).doAction(".preventDefault").throttle(100),i=this.touchend(t).doAction(".preventDefault");return n.plug(i),e.flatMap(function(t){var e={init:t.changedTouches[0].clientX,curt:0};return r.takeUntil(n).scan(e,function(t,n){return t.curt=n.changedTouches[0].clientX,t}).skip(1)})},swipeLeft:function(){var t=void 0===arguments[0]?document.body:arguments[0],n=new o["default"].Bus;return this.swipe(t,n).filter(function(t){var e=t.init,r=t.curt,i=r-e;return-10>i&&n.push(!0)})},swipeRight:function(){var t=void 0===arguments[0]?document.body:arguments[0],n=new o["default"].Bus;return this.swipe(t,n).filter(function(t){var e=t.init,r=t.curt,i=r-e;return i>10&&n.push(!0)})},resize:function(){return o["default"].fromEventTarget(window,"resize")},hashchange:function(){return o["default"].fromEventTarget(window,"hashchange")}},n.exports=e["default"]},{baconjs:1,keycode:2}],7:[function(t,n,e){"use strict";function r(t){var n=void 0,e=void 0;return t.requestFullscreen?n="requestFullscreen":t.webkitRequestFullscreen?n="webkitRequestFullscreen":t.mozRequestFullScreen?n="mozRequestFullScreen":t.msRequestFullscreen&&(n="msRequestFullscreen"),document.exitFullscreen?e="exitFullscreen":document.webkitExitFullscreen?e="webkitExitFullscreen":document.mozCancelFullScreen?e="mozCancelFullScreen":document.msExitFullscreen&&(e="msExitFullscreen"),function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document[e]():t[n]()}}var i=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var u=t("baconjs"),o=i(u);e["default"]=function(t){var n=new o["default"].Bus;return n.onValue(r(t)),n},n.exports=e["default"]},{baconjs:1}],8:[function(t,n,e){"use strict";function r(){var t=void 0===arguments[0]?{}:arguments[0],n=a["default"].extend(a["default"].defaults(t,{api:!1,wide:!1,control:!0,pointer:!0,progress:!0,backface:!0,notransition:!1}),h["default"](location.search)),e=n.wide?$:V,r=n.wide?D:H;document.querySelector("head").insertAdjacentHTML("beforeend","\n    <style>\n      [layout],\n      #"+M+" {\n        width: "+e+"px !important;\n        height: "+r+"px !important;\n      }\n    </style>");var i=a["default"].toArray(document.querySelectorAll(q));i.forEach(d["default"].compileMarkdown);var u=a["default"].toArray(document.querySelectorAll("["+L+"]"));u.forEach(function(t,n){return a["default"].attributeAssignOf(t,F)(n+1)});var s={};u.map(d["default"].extractNote).forEach(function(t,n){return s[n+1]=t}),document.body.insertAdjacentHTML("beforeend",'\n    <div id="'+M+'"></div>\n  ');var l=a["default"].getById(M);u.forEach(function(t){return l.appendChild(t)});var f=w["default"]({width:e,height:r,target:l});f.scaleBus.plug(c["default"].resize());var p=m["default"]({startPage:a["default"].getPageNumberFromHash()||1,endPage:u.length,slideElements:u});if(p.nextBus.plug(c["default"].keydown("right").throttle(100)),p.prevBus.plug(c["default"].keydown("left").throttle(100)),p.nextBus.plug(c["default"].swipeLeft()),p.prevBus.plug(c["default"].swipeRight()),p.moveBus.plug(c["default"].hashchange().map(a["default"].getPageNumberFromHash)),p.currentEs.onValue(function(t){1===t&&!location.hash||(location.hash=t)}),p.changedEs.map(".getAttribute",L).onValue(a["default"].attributeAssignOf(document.body,C)),n.notransition&&o["default"].once(1).onValue(a["default"].attributeAssignOf(document.body,W)),n.pointer){document.body.insertAdjacentHTML("beforeend",'<div id="'+T+'"></div>');var g=x["default"](a["default"].getById(T)),y=g.coordBus,b=g.toggleBus;y.plug(c["default"].mousemove()),b.plug(c["default"].key("b"))}if(n.backface){document.body.insertAdjacentHTML("beforeend",'<div id="'+P+'"></div>');var k=E["default"](a["default"].getById(P)),_=k.bgImageBus,z=k.bgFilterBus;_.plug(p.changedEs),z.plug(p.changedEs)}if(n.control){document.body.insertAdjacentHTML("beforeend",'\n      <div id="'+B+'">\n        <p><span id="'+A+'">◀</span>\n        Page <span id="'+O+'">0</span> of <span id="'+I+'">0</span>\n        <span id="'+S+'">▶</span></p>\n      </div>\n    ');var R=a["default"].getById(S),N=a["default"].getById(A);p.nextBus.plug(c["default"].click(R)),p.prevBus.plug(c["default"].click(N)),p.currentEs.onValue(a["default"].textAssignOf(a["default"].getById(O))),o["default"].once(u.length).onValue(a["default"].textAssignOf(a["default"].getById(I)))}return n.progress&&(document.body.insertAdjacentHTML("beforeend",'<div id="'+j+'"></div>'),p.percentEs.onValue(a["default"].styleAssignOf(a["default"].getById(j),"width"))),v["default"](document.body).plug(c["default"].key("f")),{Bacon:o["default"],control:c["default"],changed:p.changedEs,next:p.nextBus,prev:p.prevBus,jump:p.moveBus,ratio:f.currentRatio,notes:s}}var i=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var u=t("baconjs"),o=i(u),s=t("./util"),a=i(s),l=t("./control"),c=i(l),f=t("./query"),h=i(f),p=t("./slide"),d=i(p),g=t("./paging"),m=i(g),y=t("./fullscreen"),v=i(y),b=t("./responsive"),w=i(b),k=t("./pointer"),x=i(k),_=t("./backface"),E=i(_),S="next",A="prev",M="scaler",B="control",O="page",I="total",j="progress",T="pointer",P="backface",q='[type="text/x-markdown"]',L="layout",C="body-bg",F="page",W="no-transition",V=1024,H=768,$=1366,D=768;e["default"]=function(){var t=void 0===arguments[0]?{}:arguments[0];return t.api?{main:r,util:a["default"],control:c["default"],query:h["default"],slide:d["default"],paging:m["default"],fullScreen:v["default"],responsive:w["default"],pointer:x["default"],backface:E["default"],Bacon:o["default"]}:r(t)},n.exports=e["default"]},{"./backface":5,"./control":6,"./fullscreen":7,"./paging":9,"./pointer":10,"./query":11,"./responsive":12,"./slide":13,"./util":14,baconjs:1}],9:[function(t,n,e){"use strict";function r(t){t.removeAttribute("visible")}function i(t){t.setAttribute("visible",1)}function u(t,n){return function(e){return Math.min(n,Math.max(e,t))}}function o(t){return function(n){return 100/t*n+"%"}}var s=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var a=t("baconjs"),l=s(a);e["default"]=function(t){var n=new l["default"].Bus,e=new l["default"].Bus,s=new l["default"].Bus,a=new l["default"].Bus,c=a.map(u(1,t.endPage)).toProperty(t.startPage||1).skipDuplicates(),f=c.sampledBy(n).map(function(t){return t+1}),h=c.sampledBy(e).map(function(t){return t-1}),p=s.map(function(t){return t}),d=c.map(o(t.endPage)),g=c.map(function(n){return t.slideElements[n-1]});return a.plug(f.merge(h).merge(p)),g.onValue(function(n){t.slideElements.forEach(r),n&&i(n)}),{currentEs:c,startEs:c.filter(function(t){return 1===t}),endEs:c.filter(function(n){return n===t.endPage}),changedEs:g,percentEs:d,nextBus:n,prevBus:e,moveBus:s}},n.exports=e["default"]},{baconjs:1}],10:[function(t,n,e){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=t("baconjs"),u=r(i),o=t("./util"),s=r(o);e["default"]=function(t){var n=new u["default"].Bus,e=new u["default"].Bus,r=n.map(function(t){return t.x+"px"}),i=n.map(function(t){return t.y+"px"});return r.onValue(s["default"].styleAssignOf(t,"left")),i.onValue(s["default"].styleAssignOf(t,"top")),e.scan(!1,function(t){return!t}).map(function(t){return t?"visible":"hidden"}).onValue(s["default"].styleAssignOf(t,"visibility")),{coordBus:n,toggleBus:e}},n.exports=e["default"]},{"./util":14,baconjs:1}],11:[function(t,n,e){"use strict";function r(t){var n={};return t.slice(1).split("&").map(function(t){return t.split("=")}).forEach(function(t){return n[t[0]]=o["default"].getPrimitiveFromString(t[1])}),n}var i=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var u=t("./util"),o=i(u);e["default"]=r,n.exports=e["default"]},{"./util":14}],12:[function(t,n,e){"use strict";function r(t){return function(){return window.innerWidth/t}}function i(t){return function(){return window.innerHeight/t}}function u(t){var n=f["default"].stylePrefixDetect("transform");return function(e){t.style[n]="scale("+Math.abs(e)+")"}}function o(t){return function(){var n=t.getBoundingClientRect();t.style.left=(window.innerWidth-n.width)/2,t.style.top=(window.innerHeight-n.height)/2}}var s=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var a=t("baconjs"),l=s(a),c=t("./util"),f=s(c);e["default"]=function(){var t=void 0===arguments[0]?{}:arguments[0],n=new l["default"].Bus,e=r(t.width),s=i(t.height),a=n.map(e).toProperty(e()),c=n.map(s).toProperty(s()),h=f["default"].compose(o(t.target),u(t.target)),p=l["default"].combineWith(Math.min,a,c).toProperty();return p.onValue(h),{scaleBus:n,currentRatio:p}},n.exports=e["default"]},{"./util":14,baconjs:1}],13:[function(t,n,e){"use strict";function r(t){var n=t.innerHTML.split(/<hr\s?\/?>/),e=a(n,2),r=e[0],i=e[1];t.innerHTML=r;var u=document.createElement("div");return u.innerHTML=i||"",(u.textContent||"").replace(/^\n*/,"")}function i(t){var n=document.createElement("section");return n.innerHTML=c["default"](t.innerHTML),h["default"].toArray(t.attributes).filter(o).forEach(u(n)),t.parentNode.replaceChild(n,t),n}function u(t){return function(n){t.setAttribute(n.name,n.value)}}function o(t){return"type"!==t.name}var s=function(t){return t&&t.__esModule?t:{"default":t}},a=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){var e=[],r=!0,i=!1,u=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(a){i=!0,u=a}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw u}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance")};Object.defineProperty(e,"__esModule",{value:!0});var l=t("marked"),c=s(l),f=t("./util"),h=s(f);c["default"].setOptions({langPrefix:"hljs ",highlight:function(t){return null==window.hljs?(console.log("highlight.js (`window.hljs`) is missing"),t):window.hljs.highlightAuto(t).value}}),e["default"]={compileMarkdown:i,extractNote:r},n.exports=e["default"]},{"./util":14,marked:3}],14:[function(t,n,e){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=t("object-assign"),u=r(i);e["default"]={toArray:function(t){return Array.prototype.slice.call(t)},defaults:function(t,n){var e=this.clone(t);return Object.keys(n).forEach(function(t){t in e||(e[t]=n[t])}),e},clone:function(t){var n={};return Object.keys(t).forEach(function(e){return n[e]=t[e]}),n},extend:u["default"],compose:function(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}},getById:function(t){return document.getElementById(t)},textAssignOf:function(t){return function(n){t.textContent=n}},styleAssignOf:function(t,n){return function(e){t.style[n]=""===e?null:e}},attributeAssignOf:function(t,n){return function(e){null!=e?t.setAttribute(n,e):t.removeAttribute(n)}},preloadImg:function(t){var n=document.createElement("img");n.onload=function(){return n.parentNode.removeChild(n)},n.src=t,n.style.display="none",document.body.appendChild(n)},getPageNumberFromHash:function(){return parseInt(location.hash.replace("#",""),10)||0},getPrimitiveFromString:function(t){var n=null==t?null:t+"";return"true"===t?n=!0:"false"===t?n=!1:null==t?n=null:t.match(/^\d+$/)&&(n=parseInt(t,10)),n},stylePrefixDetect:function(t){var n=void 0,e=this.toArray(window.getComputedStyle(document.documentElement,"")),r=function(t){return-1!==e.indexOf(t)};return r("-webkit-"+t)?n="-webkit-"+t:r("-moz-"+t)?n="-moz-"+t:r("-ms-"+t)?n="-ms-"+t:r(t)&&(n=t),n}},n.exports=e["default"]},{"object-assign":4}]},{},[8])(8)});